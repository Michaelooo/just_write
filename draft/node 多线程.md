[Node.js 线程你理解的可能是错的](https://juejin.im/post/5b1e55cbe51d45067e6fcb84)

[Node.js 10.5.0新特性-多线程](<https://juejin.im/post/5b30cb5af265da59645b1065>)

[Node.js child_process模块解读](<https://juejin.im/post/5b10a814f265da6e2a08a6f7>)

[Node.js cluster模块解读](https://juejin.im/post/5b178f535188257d5902fdfa)

[Node.js的线程和进程详解](<https://github.com/xiongwilee/blog/issues/9>)

大家下午好，今天由我来为大家带来一篇分享： node 多线程

说起这个 node 多线程, 其实这和 js单线程、js 事件队列一样，是一个大家都耳熟能详的知识，最近呢，其实也挺风平浪静的，可能唯一引起了点小波澜的就是 node V10.5 之后出现的 work_threads ,代表了 node 真正的多线程。当然，这其实也并不是一个值得长篇大论的点。所以今天呢，我就是带着大家简单回顾一下有关于 node 多线程的周边，帮助大家加深记忆。

进入正题之前， 我想提出几个很基础的问题，什么是多线程？为什么需要多线程？为什么 js 又不需要多线程？为什么你又写 node 多线程？

什么是多线程？

打开一个例子，在一个操作系统中，各种各样的程序组成了计算机，每个程序都有一个进程，每个进程又可以开出多个线程，多线程的出现是为了充分的利用计算机资源。所以我们需要多线程。

那么为什么 js 又不需要多线程呢，是因为 js 的目的决定了必须这样， 因为 js 的出现是为了浏览器操作 DOM ，举个例子， 以 chrome 为例， 在一个浏览器的队列里面， 首先用户点击了鼠标要执行一个增加一个div，浏览器的UI线程收到之后，这个消息数据封装成一个鼠标事件发送给IO线程，IO线程再分配给具体页面的渲染线程。其中IO线程和UI线程是浏览器的线程，而渲染线程是每个页面自己的线程。所以如果是多线程并行的模型会出现什么结果，同时有两个线程操作，一个增加，一个删除问题就出来了，所以只要涉及到 dom 操作相关的是玩玩不能多线程。

当然，在浏览器里我们也是有多线程运行js的例子，比如上周分享会的 service-worker ，但同样的也是不允许进行 dom 操作的。

讲到这儿，就到了我们今天的主题， node 的多线程。

其实原因很简单，如 node 作者 rd 所说，他在 18 年的 js conf 大会上说的， 创作的node 的初衷就是为了做一个 事件驱动的 http 服务器，

说起 node 的多线程……
